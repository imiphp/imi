# é«˜æ€§èƒ½ Http æœåŠ¡

`imi v1.0.12` ç‰ˆæœ¬æ–°å¢äº†ä¸€ä¸ª [`Swoole\Coroutine\Http\Server`](https://wiki.swoole.com/wiki/page/p-coroutine_http_server.html) å®ç°çš„åç¨‹æœåŠ¡å™¨ã€‚éœ€è¦ `Swoole 4.4+` æ‰å¯ä½¿ç”¨è¯¥ç‰¹æ€§ã€‚

è¯¥ç‰¹æ€§æ˜¯å¯é€‰çš„ï¼Œä¸å½±å“ä»¥å‰ä½¿ç”¨çš„æœåŠ¡å™¨æ¨¡å¼ã€‚

ä½¿ç”¨åç¨‹æœåŠ¡å™¨ç‰¹æ€§ï¼Œä¾é  Linux ç³»ç»Ÿçš„ç«¯å£é‡ç”¨æœºåˆ¶ï¼Œç³»ç»Ÿçº§çš„è´Ÿè½½å‡è¡¡ï¼Œå¯ä»¥è®©ä½ çš„å¤šè¿›ç¨‹ Http æœåŠ¡å¤„ç†è¯·æ±‚çš„èƒ½åŠ›å¾—åˆ°æå‡ã€‚

ä½¿ç”¨ abï¼Œæœ¬æœº->è™šæ‹Ÿæœºï¼ˆåŒæ ¸+2è¿›ç¨‹ï¼‰å‹æµ‹`Hello World` é¡µé¢ï¼Œç›¸æ¯”ä¹‹å‰çš„æœåŠ¡å™¨æ¨¡å¼å¤§æ¦‚æœ‰ **80%** çš„æ€§èƒ½æå‡ã€‚è¯¥æ•°æ®ä»…ä¾›å‚è€ƒï¼Œä¸åŒé…ç½®ã€ç¯å¢ƒã€ä¸šåŠ¡ä»£ç è·‘å‡ºæ¥çš„æ•°å­—ä¼šæœ‰å·®è·ï¼Œä½†å¾ˆæ˜æ˜¾ï¼Œåç¨‹æœåŠ¡å™¨å¯ä»¥å®ç°æ›´é«˜æ€§èƒ½çš„ Http æœåŠ¡ã€‚

## ä½¿ç”¨æ–¹å¼

æˆ‘ä»¬é€šå¸¸ä½¿ç”¨ `vendor/bin/imi server/start` æ¥å¯åŠ¨æœåŠ¡å™¨

å¯åŠ¨ä¸»æœåŠ¡å™¨ï¼š`vendor/bin/imi server/start -name main`

å¯åŠ¨å­æœåŠ¡å™¨ï¼š`vendor/bin/imi server/start -name å­æœåŠ¡å™¨å`

æŒ‡å®šè¿›ç¨‹æ•°ï¼š

å¯åŠ¨ä¸»æœåŠ¡å™¨ï¼š`vendor/bin/imi server/start -name main -workerNum 4`

è¿›ç¨‹æ•°å‚æ•°æ˜¯å¯ä»¥å¿½ç•¥çš„ï¼Œä¼˜å…ˆè¯»å–é…ç½®æ–‡ä»¶ä¸­çš„ `@app.mainServer.configs.worker_num` é…ç½®ï¼Œå¦‚æœè¯¥é…ç½®é¡¹ä¸å­˜åœ¨åˆ™ä½¿ç”¨ CPU æ ¸å¿ƒæ•°ä½œä¸ºè¿›ç¨‹æ•°é‡ã€‚

## ä¼˜ç¼ºç‚¹æ¯”è¾ƒ

### ä¼˜ç‚¹

* ğŸ‘é«˜æ€§èƒ½ï¼ŒLinux ç³»ç»Ÿçº§çš„è´Ÿè½½å‡è¡¡

* ğŸ’ªé«˜åº¦å¯æ§ï¼Œä½¿ç”¨ imi è‡ªç ”è¿›ç¨‹æ± ç»´æŠ¤ Worker è¿›ç¨‹

* â˜•æ— ç¼æ”¯æŒï¼Œä¸šåŠ¡ä»£ç æ— éœ€åšä»»ä½•æ›´æ”¹ï¼Œå³å¯äº«å—åˆ°é«˜æ€§èƒ½

### ç¼ºç‚¹

* ä¸æ”¯æŒ Task ç‰¹æ€§

* ä¸æ”¯æŒç›‘å¬å¤šç«¯å£ã€å¤šåè®®

### æ€»ç»“

ä½¿ç”¨è¯¥ç‰¹æ€§ï¼Œå¯ä»¥äº«å—åˆ°é«˜æ€§èƒ½å¸¦æ¥çš„å¥½å¤„ï¼Œä½†æ˜¯æ— æ³•ä½¿ç”¨ Taskï¼Œä»¥åŠå¤šç«¯å£å¤šåè®®ç›‘å¬ã€‚

å¯¹äºå¼€å‘ Http API çš„åœºæ™¯æ¥è®²ï¼Œæ˜¯éå¸¸é€‚åˆç”¨è¿™ä¸ªç‰¹æ€§çš„ã€‚

## ç‹¬å äº‹ä»¶

### IMI.CO_SERVER.START

åç¨‹æœåŠ¡å™¨å¼€å§‹äº‹ä»¶

å¯é€šè¿‡ `$e->getTarget()` è·å– `CoServer` å¯¹è±¡ã€‚
